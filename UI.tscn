[gd_scene load_steps=4 format=2]

[ext_resource path="res://Roboto-Regular.ttf" type="DynamicFontData" id=1]

[sub_resource type="GDScript" id=2]
script/source = "extends Control

export var score = 0
export var timeleft = 1000

func _ready():
	$\"Panel2/Timeleft\".max_value = timeleft
	$\"Panel2/Timeleft\".value = timeleft
	

func update_ui():
	$\"Panel/Score\".text = \"Score: \" + str(score)
	$\"Panel2/Timeleft\".value = timeleft
	
func kill_enemies(number:int):
	score += int( 100 * pow(number, 1.3) )
	update_ui()
	
func penalize_wallbonk():
	timeleft -= 3
	update_ui()
	
func penalize_enemy():
	timeleft -= 10
	update_ui()
	
func penalize_empty():
	timeleft -= 1
	update_ui()

func _on_Timer_timeout():
	timeleft -= 1
	update_ui()
	

func _on_Drawbox_line_completed(killed_enemies):
	kill_enemies(killed_enemies)


func _on_Drawbox_line_interrupted():
	penalize_enemy()


func _on_Drawbox_line_wallbonked():
	penalize_wallbonk()


func _on_Drawbox_line_empty():
	penalize_empty()
"

[sub_resource type="DynamicFont" id=1]
size = 27
font_data = ExtResource( 1 )

[node name="UI" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = SubResource( 2 )
timeleft = 100

[node name="Panel" type="Panel" parent="."]
margin_left = 12.0
margin_top = 11.0
margin_right = 180.0
margin_bottom = 62.0

[node name="Score" type="Label" parent="Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 20.0
margin_top = 6.0
margin_right = -10.0
margin_bottom = -5.0
custom_fonts/font = SubResource( 1 )
text = "Score: 0"

[node name="Panel2" type="Panel" parent="."]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -403.0
margin_top = 18.0
margin_right = -13.0
margin_bottom = 73.0

[node name="Timeleft" type="ProgressBar" parent="Panel2"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 146.0
max_value = 1000.0
value = 1000.0

[node name="Label" type="Label" parent="Panel2"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 13.0
margin_top = 9.0
margin_right = -262.0
margin_bottom = -2.0
custom_fonts/font = SubResource( 1 )
text = "Time left"

[node name="Timer" type="Timer" parent="."]
autostart = true
[connection signal="timeout" from="Timer" to="." method="_on_Timer_timeout"]

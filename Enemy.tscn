[gd_scene load_steps=4 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=2]
script/source = "extends KinematicBody2D

export(Vector2) var fly_direction
export(float) var speed
export(float) var noise

func _physics_process(delta):
	var moving_vector = fly_direction.normalized() * speed * delta
	var test_collision = self.move_and_collide(moving_vector, true, true, true)
	if test_collision == null:
		self.move_and_collide(moving_vector, true, true, false)
	else:
		var collide_normal = test_collision.get_normal()
		moving_vector = moving_vector.bounce(collide_normal)
		fly_direction = moving_vector.normalized()
		self.move_and_collide(moving_vector, true, true, false)
	
	\"\"\"
	var pre_move_pos = position
	var attempt_move_pos = pre_move_pos + moving_vector
	var space_state = get_world_2d().direct_space_state
	var ray_collision = space_state.intersect_ray(pre_move_pos, attempt_move_pos, [self])
	print(ray_collision)
	if ray_collision.get(\"collider\", false):
		print(\"collide\")
		moving_vector = moving_vector.bounce(ray_collision[\"normal\"])
	self.move_and_collide(moving_vector)
	\"\"\"
	
	
	
	
	
"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 5.39758, 5.27303 )

[node name="Enemy" type="KinematicBody2D"]
script = SubResource( 2 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -0.145996, 0.43799 )
scale = Vector2( 0.165093, 0.165093 )
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2( -0.0565491, 0.452484 )
shape = SubResource( 1 )
